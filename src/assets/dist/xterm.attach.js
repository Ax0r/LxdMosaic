!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).attach=e()}}(function(){return function(){return function e(t,n,r){function o(a,i){if(!n[a]){if(!t[a]){var u="function"==typeof require&&require;if(!i&&u)return u(a,!0);if(f)return f(a,!0);var s=new Error("Cannot find module '"+a+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){return o(t[a][1][e]||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var f="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}}()({1:[function(e,t,n){"use strict";function r(e,t,n,r){var a,i=e;function u(e,t){r?i.__pushToBuffer(e||t):i.write(e||t)}n=void 0===n||n,i.__socket=t,i.__flushBuffer=function(){i.write(i.__attachSocketBuffer),i.__attachSocketBuffer=null},i.__pushToBuffer=function(e){i.__attachSocketBuffer?i.__attachSocketBuffer+=e:(i.__attachSocketBuffer=e,setTimeout(i.__flushBuffer,10))},i.__getMessage=function(e){if("object"==typeof e.data)if(a||(a=new TextDecoder),e.data instanceof ArrayBuffer)u(a.decode(e.data));else{var t=new FileReader;t.addEventListener("load",function(){u(a.decode(t.result))}),t.readAsArrayBuffer(e.data)}else{if("string"!=typeof e.data)throw Error('Cannot handle "'+typeof e.data+'" websocket message.');u(e.data)}},i.__sendData=function(e){1===t.readyState&&t.send(e)},i._core.register(o(t,"message",i.__getMessage)),n&&i._core.register(i.addDisposableListener("data",i.__sendData)),i._core.register(o(t,"close",function(){return f(i,t)})),i._core.register(o(t,"error",function(){return f(i,t)}))}function o(e,t,n){return e.addEventListener(t,n),{dispose:function(){n&&(e.removeEventListener(t,n),n=null)}}}function f(e,t){var n=e;n.off("data",n.__sendData),(t=void 0===t?n.__socket:t)&&t.removeEventListener("message",n.__getMessage),delete n.__socket}Object.defineProperty(n,"__esModule",{value:!0}),n.attach=r,n.detach=f,n.apply=function(e){e.prototype.attach=function(e,t,n){r(this,e,t,n)},e.prototype.detach=function(e){f(this,e)}}},{}]},{},[1])(1)});